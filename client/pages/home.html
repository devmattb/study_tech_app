<!--

***/
*
*   Created: 03 December 2017
*   @author Matt Bergstrom, A.K.A devmattb or Mattias Bergström.
*   Copyright 2017 Matt Bergstrom
*   Statement:
*   None of this code is to be copied or used without my (Matt Bergstroms') permission.
*
***/

-->
<template name="home">

  {{>header}}
  {{>preloader}}
  {{>navbar}}
  <div id="" class="row">
      <div class="col s12">
        <br><br>
        <h4 style="font-size: 26px; position: relative; bottom: -10px;" class="center grey-text text-darken-4">DAGENS SCHEMA</h4>
      </div>
      <div class="col s12">
        <div class="schedule"></div>
      </div>
      <div class="col s12">
        <button onclick="findSmth()" style="position: absolute; bottom 1000px!important; right: 100px;" class="red btn waves-effect waves-light"> FIND </button>
      </div>
      <div class="col s12">
        <button onclick="addDesc()" style="position: absolute; bottom 0px; right: 0px;" class="btn waves-effect waves-light"> ADD DESC </button>
      </div>
  </div>

  <script>

/**
*
*     THE FOLLOWING IS ONLY TEST-CODE. USED FOR DEVELOPERS.
*     TODO: REMOVE.
*
**/function formatDayOrMonth(dateNum){
  if (parseInt(dateNum) < 10 && dateNum.toString().substring(0,1) != "0") {
    dateNum = "0"+dateNum; // Make sure we have a zero before the numbers.
  }
  return dateNum;
}
Date.prototype.addHours = function(h) {
this.setTime(this.getTime() + (h*60*60*1000));
return this;
}
  function findSmth() {

      // // Grab all activities:
      // var allActivityObj = Activities.find({courseType: "Samhällskunskap"});
      // var activityArray = new Array();
      // var listActivityDesc = new Array();
      //
      // // Store all our objects from the object that holds all activity objects,
      // // in to an array instead.
      // allActivityObj.forEach(function(data){
      //     activityArray.push(data); // Add to our forbiddenTimesArr.
      // });
      //
      // // Sorts all activities in Ascending order, in this array,
      // // according to their phase and phaseOrder. Chronological phases...
      // activityArray.sort(function(dataA, dataB){
      //
      //   if ( dataA.phase == dataB.phase ) { // Same phase.
      //     return dataA.phaseOrder-dataB.phaseOrder; // Sort by internal phaseOrder instead...
      //   } else { // Not same phase
      //     return dataA.phase-dataB.phase; // Sort by phase.
      //   }
      //
      // });
      //
      // // Put only the description strings of these activities in a list.
      // // Note that this list is still sorted.
      // activityArray.forEach(function(data){
      //     listActivityDesc.push(data.desc); // Add to our forbiddenTimesArr.
      // });
      //
      // console.log(listActivityDesc.toString());


      var startFromDay = new Date();
      var tmp = new Date("2018-03-02 16:00:00");
      var preliminaryDateObj = new Date(""+startFromDay.getFullYear()
      +"-"+formatDayOrMonth(startFromDay.getMonth()+1)
      +"-"+formatDayOrMonth(startFromDay.getDate())
      + " 16:00:00");
      console.log(preliminaryDateObj.addHours(2).getHours());
      console.log(tmp-preliminaryDateObj);
  }


function addDesc() {

  // Initialization...
  var docs = [];
  var docCourse = ["Samhällskunskap", "Språk", "Kvantitativ"];
  var docEx = ["Litteraturanalys", "Skriftligt Prov", "Glosor", "Muntlig Redovisning", "Uppsats"];
  var docDesc = [

    "Lit bro",
    "Skriftligt bro",
    "Glosor bro",
    "Muntlig bro",
    "Uppsats bro",

  ];

  // Create all documents...
  var cell = 0;
  for (var j = 0; j < 3; j++) {
    for (var i = 0; i < 5; i++) {
        docs[cell] = {
          courseType: docCourse[j],
          examinationType: docEx[i],
          phase: 1, //parseInt(Math.random()*5+1),
          phaseOrder: parseInt(Math.random()*3+1),
          desc: docDesc[i],
        };
        cell++;
    }
  }

  // Insert all documents...
  for (var i = 0; i < 5*3; i++) {
    Activities.insert(docs[i]);
  }

}

  // var courseType = "Samhällskunskap";
  // var exType = "Skriftligt Prov";
  // console.log(Samhällskunskap.find({examinationType: exType}));

  </script>

  </template>
